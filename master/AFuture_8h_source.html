<!-- HTML header for doxygen 1.9.1--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="dark-mode" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/xhtml;charset=utf-8" http-equiv="Content-Type"/>
<meta content="noindex" name="robots"/>
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="Doxygen 1.13.1" name="generator"/>
<meta content="width=device-width, initial-scale=0.8" name="viewport"/>
<title>AUI Framework: aui.core/src/AUI/Thread/AFuture.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"/>
<script src="jquery.js" type="text/javascript"></script>
<script src="dynsections.js" type="text/javascript"></script>
<script src="toc.js" type="text/javascript"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script src="navtreedata.js" type="text/javascript"></script>
<script src="navtree.js" type="text/javascript"></script>
<script src="resize.js" type="text/javascript"></script>
<script src="cookie.js" type="text/javascript"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script src="search/searchdata.js" type="text/javascript"></script>
<script src="search/search.js" type="text/javascript"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellpadding="0" cellspacing="0">
<tbody>
<tr style="height: 56px;">
<td id="projectlogo"><img alt="Logo" src="logo_doxygen.svg"/></td>
<td id="projectalign" style="padding-left: 0.5em;">
<div id="projectname">AUI Framework
                         <span id="projectnumber">master</span>
</div>
<div id="projectbrief">Cross-platform base for C++ UI apps</div>
</td>
</tr>
</tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script src="menudata.js" type="text/javascript"></script>
<script src="menu.js" type="text/javascript"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('AFuture_8h_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>
<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>
<div class="header">
<div class="headertitle"><div class="title">AFuture.h</div></div>
</div><!--header-->
<div class="contents aui-toc-contents"><div class="contents-rails-left">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * AUI Framework - Declarative UI toolkit for modern C++20</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> * Copyright (C) 2020-2025 Alex2772 and Contributors</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> *</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * SPDX-License-Identifier: MPL-2.0</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> *</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> * This Source Code Form is subject to the terms of the Mozilla Public</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> * License, v. 2.0. If a copy of the MPL was not distributed with this</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> * file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> */</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;exception&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include "AUI/Traits/concepts.h"</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include "AUI/Util/ABitField.h"</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#if AUI_COROUTINES</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;coroutine&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include "AConditionVariable.h"</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include "AMutex.h"</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;AUI/Common/SharedPtrTypes.h&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;AUI/Common/AString.h&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;AUI/Common/AException.h&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;AUI/Logging/ALogger.h&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;AUI/Reflect/AReflect.h&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="keyword">class </span><a class="code hl_class" href="classAThreadPool.html">AThreadPool</a>;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00037">
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="classAInvocationTargetException.html">   37</a></span><span class="keyword">class </span>AInvocationTargetException: <span class="keyword">public</span> AException {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    AInvocationTargetException(<span class="keyword">const</span> <a class="code hl_class" href="classAString.html">AString</a>&amp; message = {}, std::exception_ptr causedBy = std::current_exception()):</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        AException(message, std::move(causedBy), <a class="code hl_function" href="classAStacktrace.html#a40c074f612095508f89377c7cf5140d3">AStacktrace::capture</a>(3)) {}</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    ~AInvocationTargetException() <span class="keyword">noexcept</span> <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>};</div>
</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><a class="code hl_define" href="group__core.html#gad9bfc0a6304376bef420ce99fbe17e85">AUI_ENUM_FLAG</a>(AFutureWait) {</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    JUST_WAIT = 0b00,</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    ALLOW_STACKFUL_COROUTINES = 0b10,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    ALLOW_TASK_EXECUTION_IF_NOT_PICKED_UP = 0b01,</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_enumvalue" href="group__views.html#ggaec8a763bfbb2044d7b55de90c5a56742a5b39c8b553c821e7cddc6da64b5bd2ee">DEFAULT</a> = ALLOW_STACKFUL_COROUTINES | ALLOW_TASK_EXECUTION_IF_NOT_PICKED_UP,</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>};</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="keyword">namespace </span>aui::impl::future {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Inner&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00070">
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1CancellationWrapper.html">   70</a></span>    <span class="keyword">struct </span>CancellationWrapper {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <span class="keyword">explicit</span> CancellationWrapper(_unique&lt;Inner&gt; wrapped) : wrapped(std::move(wrapped)) {}</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        ~CancellationWrapper() {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>            wrapped-&gt;cancel();</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>            wrapped-&gt;waitForTask();</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        }</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        [[nodiscard]]</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="keyword">const</span> _unique&lt;Inner&gt;&amp; ptr() <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            <span class="keywordflow">return</span> wrapped;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        }</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        Inner* operator-&gt;() <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <span class="keywordflow">return</span> wrapped.get();</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        _unique&lt;Inner&gt; wrapped;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    };</div>
</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00093">
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1OnSuccessCallback.html">   93</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1OnSuccessCallback.html">OnSuccessCallback</a> {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="keyword">using </span>type = std::function&lt;void(<span class="keyword">const</span> T&amp; value)&gt;;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    };</div>
</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00098">
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1FutureReturnType.html">   98</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1FutureReturnType.html">FutureReturnType</a> {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="keyword">using </span>type = T&amp;;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    };</div>
</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="keyword">template</span>&lt;&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00103">
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1FutureReturnType.html">  103</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1FutureReturnType.html">FutureReturnType</a>&lt;void&gt; {</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        <span class="keyword">using </span>type = void;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    };</div>
</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="keyword">template</span>&lt;&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00109">
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1OnSuccessCallback.html">  109</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1OnSuccessCallback.html">OnSuccessCallback</a>&lt;void&gt; {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        <span class="keyword">using </span>type = std::function&lt;void()&gt;;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    };</div>
</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value = <span class="keywordtype">void</span>&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00113">
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html">  113</a></span>    <span class="keyword">class </span><a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#abfe5754a3209491e78c64461244b63fa">Future</a></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> isVoid = std::is_same_v&lt;void, Value&gt;;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <span class="keyword">using </span>TaskCallback = std::function&lt;Value()&gt;;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="keyword">using </span>OnSuccessCallback = <span class="keyword">typename</span> OnSuccessCallback&lt;Value&gt;::type;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00121">
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html">  121</a></span>        <span class="keyword">struct </span>Inner {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>            <span class="keywordtype">bool</span> interrupted = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">  126</a></span>            std::conditional_t&lt;isVoid, bool, AOptional&lt;Value&gt;&gt; <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a>;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <a class="code hl_class" href="classAOptional.html">AOptional&lt;AInvocationTargetException&gt;</a> exception;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">  132</a></span>            <a class="code hl_class" href="classASpinlockMutex.html">ASpinlockMutex</a> <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>            <a class="code hl_class" href="classAConditionVariable.html">AConditionVariable</a> cv;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            TaskCallback task;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>            OnSuccessCallback onSuccess;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>            std::function&lt;void(<span class="keyword">const</span> <a class="code hl_class" href="classAException.html">AException</a>&amp; exception)&gt; onError;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>            <a class="code hl_class" href="class__.html">_&lt;AAbstractThread&gt;</a> thread;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>            <span class="keywordtype">bool</span> cancelled = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>            <span class="keyword">explicit</span> Inner(std::function&lt;Value()&gt; task) <span class="keyword">noexcept</span>: task(std::move(task)) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(isVoid) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                    <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>                }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            }</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>            <span class="keywordtype">void</span> waitForTask() noexcept {</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                <span class="keywordtype">bool</span> rethrowInterrupted = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                <span class="keywordflow">while</span> ((thread) &amp;&amp; !<a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#aa5daf770778f70b6ce98d301d0e8619f">hasResult</a>() &amp;&amp; !cancelled) {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                        cv.wait(lock);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classAThread_1_1Interrupted.html">AThread::Interrupted</a>&amp;) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>                        rethrowInterrupted = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>                    }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                <span class="keywordflow">if</span> (rethrowInterrupted) {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                    <a class="code hl_function" href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a>()-&gt;interrupt();</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                }</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            [[nodiscard]]</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <span class="keywordtype">bool</span> isWaitNeeded() noexcept {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                <span class="keywordflow">return</span> (thread || !cancelled) &amp;&amp; !hasResult();</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>            [[nodiscard]]</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>            <span class="keywordtype">bool</span> hasResult() const noexcept {</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a> || exception || interrupted;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>            }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>            [[nodiscard]]</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>            <span class="keywordtype">bool</span> hasValue() const noexcept {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                <span class="keywordflow">return</span> bool(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a>);</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>            }</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            <span class="keywordtype">bool</span> setThread(_&lt;AAbstractThread&gt; thr) <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                <span class="keywordflow">if</span> (cancelled) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                <span class="keywordflow">if</span> (thread) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                thread = std::move(thr);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            <span class="keywordtype">void</span> wait(<span class="keyword">const</span> _weak&lt;CancellationWrapper&lt;Inner&gt;&gt;&amp; innerWeak, ABitField&lt;AFutureWait&gt; flags = AFutureWait::DEFAULT) <span class="keyword">noexcept</span>;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            <span class="keywordtype">void</span> cancel() noexcept {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                <span class="keywordflow">if</span> (!cancelled) {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                    cancelled = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>                    <span class="keywordflow">if</span> (thread &amp;&amp; !hasResult()) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                        thread-&gt;interrupt();</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00202">
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#adbe5e1bfd42e4aeed5cb2afee35eff48">  202</a></span>            <span class="keywordtype">bool</span> <a class="code hl_function" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#adbe5e1bfd42e4aeed5cb2afee35eff48">tryExecute</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct__weak.html">_weak</a>&lt;<a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1CancellationWrapper.html">CancellationWrapper&lt;Inner&gt;</a>&gt;&amp; innerWeak) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                <span class="comment">/*</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">                 * We should assume that this == nullptr or invalid.</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="comment">                 * We can assert that this pointer is safe only if we hold at least one shared_ptr.</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="comment">                 * It allows callers to pass a weak_ptr in any state.</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment">                 */</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                <span class="keywordflow">if</span> (<span class="keyword">auto</span> innerCancellation = innerWeak.lock()) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                    <span class="keyword">auto</span>&amp; inner = innerCancellation-&gt;ptr();</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                    <span class="keywordflow">if</span> (inner-&gt;setThread(<a class="code hl_function" href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a>())) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                        <span class="keywordflow">if</span> (task == <span class="keyword">nullptr</span>) { <span class="comment">// task is executed in wait() function</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                        }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                        std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                        <span class="keywordflow">if</span> (task == <span class="keyword">nullptr</span>) { <span class="comment">// task is executed in wait() function</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                        }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                        <span class="keyword">auto</span> func = std::move(task);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>                        <a class="code hl_define" href="group__useful__macros.html#gaaea31a73fb11ef46f539d8292b33167f">AUI_ASSERT</a>(<span class="keywordtype">bool</span>(func));</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>                        lock.unlock();</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                        innerCancellation = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                        <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(isVoid) {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>                            func();</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                            <span class="keywordflow">if</span> (<span class="keyword">auto</span> sharedPtrLock = innerWeak.lock()) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                                lock.lock();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                                <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                                cv.notify_all();</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                                <a class="code hl_function" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#aa7c5aefcf52dd35751c46ceec94e8405">notifyOnSuccessCallback</a>(lock);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                                (void)sharedPtrLock; <span class="comment">// sharedPtrLock is *used*</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                                <span class="keywordflow">if</span> (lock.owns_lock()) lock.unlock(); <span class="comment">// unlock earlier because destruction of shared_ptr may cause deadlock</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                            }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                            <span class="keyword">auto</span> result = func();</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                            <span class="keywordflow">if</span> (<span class="keyword">auto</span> sharedPtrLock = innerWeak.lock()) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                                lock.lock();</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                                <a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a> = std::move(result);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                                cv.notify_all();</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                                <a class="code hl_function" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#aa7c5aefcf52dd35751c46ceec94e8405">notifyOnSuccessCallback</a>(lock);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                                (void)sharedPtrLock; <span class="comment">// sharedPtrLock is *used*</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                                <span class="keywordflow">if</span> (lock.owns_lock()) lock.unlock(); <span class="comment">// unlock earlier because destruction of shared_ptr may cause deadlock</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                            }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                        }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classAThread_1_1Interrupted.html">AThread::Interrupted</a>&amp;) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                        <span class="keywordflow">if</span> (<span class="keyword">auto</span> sharedPtrLock = innerWeak.lock()) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                            inner-&gt;reportInterrupted();</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                        }</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                        <span class="keywordflow">throw</span>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                        <span class="keywordflow">if</span> (<span class="keyword">auto</span> sharedPtrLock = innerWeak.lock()) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                            inner-&gt;reportException();</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                        }</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                    } </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            }</div>
</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <span class="keywordtype">void</span> reportInterrupted() noexcept {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                interrupted = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                cv.<a class="code hl_function" href="classAConditionVariable.html#ac0de7beaf1c9b3b0806d8bdec30af303">notify_all</a>();</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <span class="keywordtype">void</span> reportException(std::exception_ptr causedBy = std::current_exception()) noexcept {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                <span class="keywordflow">if</span> (cancelled) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                std::unique_lock lock(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                exception.emplace(<span class="stringliteral">"exception reported"</span>, std::move(causedBy));</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                cv.<a class="code hl_function" href="classAConditionVariable.html#ac0de7beaf1c9b3b0806d8bdec30af303">notify_all</a>();</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                <span class="keywordflow">if</span> (!onError) {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                <span class="keyword">auto</span> localOnError = std::move(onError);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                lock.unlock();</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>                localOnError(*exception);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>            }</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00293">
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno"><a class="line" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#aa7c5aefcf52dd35751c46ceec94e8405">  293</a></span>            <span class="keywordtype">void</span> <a class="code hl_function" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#aa7c5aefcf52dd35751c46ceec94e8405">notifyOnSuccessCallback</a>(std::unique_lock&lt;<span class="keyword">decltype</span>(<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">mutex</a>)&gt;&amp; lock) <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>                <a class="code hl_define" href="group__useful__macros.html#gaaea31a73fb11ef46f539d8292b33167f">AUI_ASSERT</a>(lock.owns_lock());</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                <span class="keywordflow">if</span> (cancelled) {</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>                }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a> &amp;&amp; onSuccess) {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                    <span class="keyword">auto</span> localOnSuccess = std::move(onSuccess);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                    onSuccess = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                    lock.unlock();</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>                    invokeOnSuccessCallback(localOnSuccess);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>                }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            }</div>
</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <span class="keyword">template</span>&lt;<span class="keyword">typename</span> F&gt;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            <span class="keywordtype">void</span> invokeOnSuccessCallback(F&amp;&amp; f) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isVoid) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                        f();</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                        f(*<a class="code hl_variable" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">value</a>);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classAException.html">AException</a>&amp; e) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                    ALogger::err(<span class="stringliteral">"AFuture"</span>) &lt;&lt; <span class="stringliteral">"AFuture onSuccess thrown an exception: "</span> &lt;&lt; e;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                }</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            <span class="keywordtype">void</span> addOnSuccessCallback(Callback&amp;&amp; callback) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isVoid) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                    <span class="keywordflow">if</span> (onSuccess) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                        onSuccess = [prev = std::move(onSuccess),</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                                     callback = std::forward&lt;Callback&gt;(callback)]() <span class="keyword">mutable</span> {</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                            prev();</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                            callback();</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                        };</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                        onSuccess = [callback = std::forward&lt;Callback&gt;(callback)]() <span class="keyword">mutable</span> { callback(); };</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                    }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                    <span class="keywordflow">if</span> (onSuccess) {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                        onSuccess = [prev = std::move(onSuccess),</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                                     callback = std::forward&lt;Callback&gt;(callback)](<span class="keyword">const</span> Value&amp; v) <span class="keyword">mutable</span> {</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                            prev(v);</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                            callback(v);</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                        };</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                        onSuccess = [callback = std::forward&lt;Callback&gt;(callback)](<span class="keyword">const</span> Value&amp; v) <span class="keyword">mutable</span> {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                            callback(v);</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                        };</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                    }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            <span class="keywordtype">void</span> addOnErrorCallback(Callback&amp;&amp; callback) {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>                <span class="keywordflow">if</span> (onError) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>                    onError = [prev = std::move(onError),</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                               callback = std::forward&lt;Callback&gt;(callback)](<span class="keyword">const</span> AException&amp; v) {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                        prev(v);</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                        callback(v);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                    };</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                    onError = [callback = std::forward&lt;Callback&gt;(callback)](<span class="keyword">const</span> AException&amp; v) { callback(v); };</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                }</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        };</div>
</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="preprocessor">#if AUI_COROUTINES</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="keyword">struct </span>CoPromiseType;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keyword">protected</span>:</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        _&lt;CancellationWrapper&lt;Inner&gt;&gt; mInner;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#abfe5754a3209491e78c64461244b63fa">  376</a></span>        <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#abfe5754a3209491e78c64461244b63fa">Future</a>(TaskCallback task = <span class="keyword">nullptr</span>): mInner(_new&lt;<a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1CancellationWrapper.html">CancellationWrapper</a>&lt;<a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html">Inner</a>&gt;&gt;((_unique&lt;<a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html">Inner</a>&gt;)(new <a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html">Inner</a>(std::move(task))))) {}</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        [[nodiscard]]</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keyword">const</span> <a class="code hl_class" href="class__.html">_&lt;CancellationWrapper&lt;Inner&gt;</a>&gt;&amp; inner() const noexcept {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>            <span class="keywordflow">return</span> mInner;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        [[nodiscard]]</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00387">
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a0578501a241e49a209694084f6eb1194">  387</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a0578501a241e49a209694084f6eb1194">isWaitNeeded</a>() const noexcept {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="keywordflow">return</span> (*mInner)-&gt;isWaitNeeded();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        }</div>
</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        [[nodiscard]]</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00395">
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#aa5daf770778f70b6ce98d301d0e8619f">  395</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#aa5daf770778f70b6ce98d301d0e8619f">hasResult</a>() const noexcept {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            <span class="keywordflow">return</span> (*mInner)-&gt;hasResult();</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        }</div>
</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        [[nodiscard]]</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00404">
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a11ec964f2ce8f8726b37f0aa5f7ecbb0">  404</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a11ec964f2ce8f8726b37f0aa5f7ecbb0">hasValue</a>() const noexcept {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            <span class="keywordflow">return</span> (*mInner)-&gt;hasValue();</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        }</div>
</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordtype">void</span> reportException() const noexcept {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            (*mInner)-&gt;reportException();</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Callback&gt;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        <span class="keywordtype">void</span> onSuccess(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a11ec964f2ce8f8726b37f0aa5f7ecbb0">hasValue</a>()) { <span class="comment">// cheap lookahead</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>                (*mInner)-&gt;invokeOnSuccessCallback(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            }</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>            std::unique_lock lock((*mInner)-&gt;mutex);</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a11ec964f2ce8f8726b37f0aa5f7ecbb0">hasValue</a>()) { <span class="comment">// not so cheap, but cheapier than adding the callback to inner</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>                (*mInner)-&gt;invokeOnSuccessCallback(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            }</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            (*mInner)-&gt;addOnSuccessCallback(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        }</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keyword">template</span>&lt;aui::invocable&lt;const AException&amp;&gt; Callback&gt;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        <span class="keywordtype">void</span> onError(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            std::unique_lock lock((*mInner)-&gt;mutex);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            (*mInner)-&gt;addOnErrorCallback(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keyword">template</span>&lt;aui::invocable Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00436">
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a4e51c2970177c73026597a889d09c363">  436</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a4e51c2970177c73026597a889d09c363">onFinally</a>(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            std::unique_lock lock((*mInner)-&gt;mutex);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            (*mInner)-&gt;addOnSuccessCallback([callback](<span class="keyword">const</span> <span class="keyword">auto</span>&amp;...) { callback(); });</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            (*mInner)-&gt;addOnErrorCallback([callback = std::move(callback)](<span class="keyword">const</span> <span class="keyword">auto</span>&amp;...) { callback(); });</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            (*mInner)-&gt;notifyOnSuccessCallback(lock);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        }</div>
</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00452">
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a86f6a2302691921a1848b44813710a41">  452</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a86f6a2302691921a1848b44813710a41">cancel</a>() const noexcept {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>            (*mInner)-&gt;cancel();</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        }</div>
</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <span class="keywordtype">void</span> reportInterrupted()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            (*mInner)-&gt;reportInterrupted();</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00465">
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a93534534889dea9725ee1f5acbbec3c8">  465</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a93534534889dea9725ee1f5acbbec3c8">wait</a>(AFutureWait flags = AFutureWait::DEFAULT)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            (*mInner)-&gt;wait(mInner, flags);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            checkForSelfWait();</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        }</div>
</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00478">
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#ac99fbb4b588e6504a9da1a9186e137ae">  478</a></span>        <span class="keyword">typename</span> FutureReturnType&lt;Value&gt;::type <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#ac99fbb4b588e6504a9da1a9186e137ae">get</a>(AFutureWait flags = AFutureWait::DEFAULT)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>            <a class="code hl_function" href="classAThread.html#a1664a87c918f74c753e435501d0d1885">AThread::interruptionPoint</a>();</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span> </div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            (*mInner)-&gt;wait(mInner, flags);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            <a class="code hl_function" href="classAThread.html#a1664a87c918f74c753e435501d0d1885">AThread::interruptionPoint</a>();</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            <span class="keywordflow">if</span> ((*mInner)-&gt;exception) {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                <span class="keywordflow">throw</span> *(*mInner)-&gt;exception;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <span class="keywordflow">if</span> ((*mInner)-&gt;interrupted) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                <span class="keywordflow">throw</span> <a class="code hl_class" href="classAInvocationTargetException.html">AInvocationTargetException</a>(<span class="stringliteral">"Future execution interrupted"</span>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            }</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            checkForSelfWait();</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(!isVoid) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>                <span class="keywordflow">return</span> *(*mInner)-&gt;value;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        }</div>
</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00505">
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#aecb26a46cb0171ac3d3210ffe6eca1f5">  505</a></span>        <span class="keyword">typename</span> FutureReturnType&lt;Value&gt;::type <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#aecb26a46cb0171ac3d3210ffe6eca1f5">operator*</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            <span class="keywordflow">return</span> **<span class="keyword">const_cast&lt;</span><a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#abfe5754a3209491e78c64461244b63fa">Future</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        }</div>
</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00517">
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a4774b655e122ffe6ee93f60d0f5632aa">  517</a></span>        <span class="keyword">typename</span> FutureReturnType&lt;Value&gt;::type <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a4774b655e122ffe6ee93f60d0f5632aa">operator*</a>() {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#ac99fbb4b588e6504a9da1a9186e137ae">get</a>();</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        }</div>
</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00529">
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno"><a class="line" href="classaui_1_1impl_1_1future_1_1Future.html#a57e9a0f2c65b1e36c3ccd5ff59a40910">  529</a></span>        Value* <a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#a57e9a0f2c65b1e36c3ccd5ff59a40910">operator-&gt;</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <span class="keywordflow">return</span> &amp;<a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#aecb26a46cb0171ac3d3210ffe6eca1f5">operator*</a>();</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        }</div>
</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <span class="keywordtype">void</span> checkForSelfWait()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            <span class="keywordflow">if</span> (!(*mInner)-&gt;hasResult() &amp;&amp; <a class="code hl_function" href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a>() == (*mInner)-&gt;thread) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>                <span class="keywordflow">throw</span> <a class="code hl_class" href="classAException.html">AException</a>(<span class="stringliteral">"self wait?"</span>);</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            }</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        }</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    };</div>
</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span> </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>}</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T = <span class="keywordtype">void</span>&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00621">
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno"><a class="line" href="classAFuture.html">  621</a></span><span class="keyword">class </span>AFuture final: <span class="keyword">public</span> <a class="code hl_class" href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future</a>&lt;T&gt; {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keyword">using </span>super = <span class="keyword">typename</span> <a class="code hl_class" href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future&lt;T&gt;</a>;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <span class="keyword">using </span>Task = <span class="keyword">typename</span> super::TaskCallback;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span><span class="preprocessor">#if AUI_COROUTINES</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keyword">using </span>promise_type = <span class="keyword">typename</span> super::CoPromiseType;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keyword">using </span>Inner = <a class="code hl_struct" href="structaui_1_1impl_1_1future_1_1CancellationWrapper.html">aui::impl::future::CancellationWrapper&lt;typename super::Inner&gt;</a>;</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keyword">explicit</span> AFuture(T immediateValue): super() {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <span class="keyword">auto</span>&amp; inner = (*super::mInner);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        inner-&gt;value = std::move(immediateValue);</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    }</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    AFuture(Task task = <span class="keyword">nullptr</span>) <span class="keyword">noexcept</span>: super(std::move(task)) {}</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    ~AFuture() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    AFuture(<span class="keyword">const</span> AFuture&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    AFuture(AFuture&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    AFuture&amp; operator=(<span class="keyword">const</span> AFuture&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    AFuture&amp; operator=(AFuture&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00651">
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno"><a class="line" href="classAFuture.html#aa640a25cdc678b93f8d764a83013841f">  651</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAFuture.html#aa640a25cdc678b93f8d764a83013841f">supplyValue</a>(T v) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        <span class="keyword">auto</span>&amp; inner = (*super::mInner);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <a class="code hl_define" href="group__useful__macros.html#gae43a68976a4d8539e92ff86fc034218c">AUI_ASSERTX</a>(inner-&gt;task == <span class="keyword">nullptr</span>, <span class="stringliteral">"task is already provided"</span>);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        std::unique_lock lock(inner-&gt;mutex);</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>        inner-&gt;value = std::move(v);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        inner-&gt;cv.notify_all();</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        inner-&gt;notifyOnSuccessCallback(lock);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    }</div>
</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00664">
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno"><a class="line" href="classAFuture.html#ad63fde0831188f9a75a7b0e10bd2a50d">  664</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAFuture.html#ad63fde0831188f9a75a7b0e10bd2a50d">supplyException</a>(std::exception_ptr causedBy = std::current_exception()) const noexcept {</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>        <span class="keyword">auto</span>&amp; inner = (*super::mInner);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        inner-&gt;reportException(std::move(causedBy));</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    }</div>
</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span> </div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <a class="code hl_class" href="classAFuture.html">AFuture</a>&amp; operator=(std::nullptr_t) <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>        super::mInner = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    }</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span> </div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    [[nodiscard]]</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    <span class="keywordtype">bool</span> operator==(std::nullptr_t) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="keywordflow">return</span> super::mInner == <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    }</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span> </div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    [[nodiscard]]</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keywordtype">bool</span> operator!=(std::nullptr_t) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <span class="keywordflow">return</span> super::mInner != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    }</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    [[nodiscard]]</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> AFuture&amp; r) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        <span class="keywordflow">return</span> super::mInner == r.mInner;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    }</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="keyword">template</span>&lt;aui::invocable&lt;const T&amp;&gt; Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00709">
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno"><a class="line" href="classAFuture.html#a0c46bbaafece47c858e18e1ae3a9b27b">  709</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#a0c46bbaafece47c858e18e1ae3a9b27b">onSuccess</a>(Callback&amp;&amp; callback) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        super::onSuccess(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    }</div>
</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <span class="keyword">template</span>&lt;aui::invocable&lt;const AException&amp;&gt; Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00734">
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno"><a class="line" href="classAFuture.html#a2c29ecb80f38bac577e9ddcc8535918e">  734</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#a2c29ecb80f38bac577e9ddcc8535918e">onError</a>(Callback&amp;&amp; callback) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        super::onError(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    }</div>
</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <span class="keyword">template</span>&lt;aui::invocable Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00743">
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno"><a class="line" href="classAFuture.html#ae25e87699d0b39d45b6b2cd3555dc7b5">  743</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#ae25e87699d0b39d45b6b2cd3555dc7b5">onFinally</a>(Callback&amp;&amp; callback) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        super::onFinally(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    }</div>
</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    <span class="keyword">template</span>&lt;aui::invocable&lt;const T&amp;&gt; Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00752">
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno"><a class="line" href="classAFuture.html#a657b6d64c82ffd61689d5fc6f8d61ebe">  752</a></span>    <span class="keyword">auto</span> <a class="code hl_function" href="classAFuture.html#a657b6d64c82ffd61689d5fc6f8d61ebe">map</a>(Callback&amp;&amp; callback) -&gt; AFuture&lt;decltype(callback(std::declval&lt;T&gt;()))&gt; <span class="keyword">const</span> {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        AFuture&lt;decltype(callback(std::declval&lt;T&gt;()))&gt; result;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        <a class="code hl_function" href="classAFuture.html#a0c46bbaafece47c858e18e1ae3a9b27b">onSuccess</a>([result, callback = std::forward&lt;Callback&gt;(callback)](<span class="keyword">const</span> T&amp; v) {</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>            result.supplyValue(callback(v));</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        });</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>        <a class="code hl_function" href="classAFuture.html#a2c29ecb80f38bac577e9ddcc8535918e">onError</a>([result](<span class="keyword">const</span> <a class="code hl_class" href="classAException.html">AException</a>&amp; v) {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                <span class="keywordflow">throw</span> v;</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>            } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                result.reportException();</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>            }</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        });</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    }</div>
</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>};</div>
</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span> </div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span><span class="keyword">template</span>&lt;&gt;</div>
<div class="foldopen" data-end="};" data-start="{" id="foldopen00769">
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno"><a class="line" href="classAFuture.html">  769</a></span><span class="keyword">class </span>AFuture&lt;void&gt; final: <span class="keyword">public</span> <a class="code hl_class" href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future</a>&lt;void&gt; {</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <span class="keyword">using </span>T = void;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="keyword">using </span>super = <span class="keyword">typename</span> <a class="code hl_class" href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future&lt;T&gt;</a>;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="keyword">using </span>Task = <span class="keyword">typename</span> super::TaskCallback;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span><span class="preprocessor">#if AUI_COROUTINES</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <span class="keyword">using </span>promise_type = <span class="keyword">typename</span> super::CoPromiseType;</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <span class="keyword">using </span>Inner = <span class="keyword">decltype</span>(std::declval&lt;super&gt;().inner());</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    AFuture(Task task = <span class="keyword">nullptr</span>) <span class="keyword">noexcept</span>: super(std::move(task)) {}</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    ~AFuture() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    AFuture(<span class="keyword">const</span> AFuture&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>    AFuture(AFuture&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span> </div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    AFuture&amp; operator=(<span class="keyword">const</span> AFuture&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    AFuture&amp; operator=(AFuture&amp;&amp;) <span class="keyword">noexcept</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00793">
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno"><a class="line" href="classAFuture.html#a2f550fb2f9abba74e364cb54b2f9a914">  793</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAFuture.html#a2f550fb2f9abba74e364cb54b2f9a914">supplyException</a>(std::exception_ptr causedBy = std::current_exception()) const noexcept {</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        <span class="keyword">auto</span>&amp; inner = (*super::mInner);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        inner-&gt;reportException(std::move(causedBy));</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    }</div>
</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span></div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00803">
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno"><a class="line" href="classAFuture.html#aee857ead4b1496f905155e0b09fb091c">  803</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAFuture.html#aee857ead4b1496f905155e0b09fb091c">supplyValue</a>() const noexcept {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <span class="keyword">auto</span>&amp; inner = (*super::mInner);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <a class="code hl_define" href="group__useful__macros.html#gae43a68976a4d8539e92ff86fc034218c">AUI_ASSERTX</a>(inner-&gt;task == <span class="keyword">nullptr</span>, <span class="stringliteral">"task is already provided"</span>);</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        std::unique_lock lock(inner-&gt;mutex);</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        inner-&gt;value = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        inner-&gt;cv.notify_all();</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        inner-&gt;notifyOnSuccessCallback(lock);</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    }</div>
</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span> </div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <a class="code hl_class" href="classAFuture.html">AFuture</a>&amp; operator=(std::nullptr_t) <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        super::mInner = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    }</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span> </div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    [[nodiscard]]</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="keywordtype">bool</span> operator==(std::nullptr_t) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">return</span> super::mInner == <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    [[nodiscard]]</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="keywordtype">bool</span> operator!=(std::nullptr_t) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keywordflow">return</span> super::mInner != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    }</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span> </div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    [[nodiscard]]</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> AFuture&amp; r) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordflow">return</span> super::mInner == r.mInner;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    }</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="keyword">template</span>&lt;aui::invocable Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00853">
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno"><a class="line" href="classAFuture.html#aca801362eb2b2fe811b8ef673fa081d6">  853</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#aca801362eb2b2fe811b8ef673fa081d6">onSuccess</a>(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        super::onSuccess(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    }</div>
</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="keyword">template</span>&lt;aui::invocable&lt;const AException&amp;&gt; Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00878">
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno"><a class="line" href="classAFuture.html#a0419821dfc46db2a6c7981927994e2a2">  878</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#a0419821dfc46db2a6c7981927994e2a2">onError</a>(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        super::onError(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    }</div>
</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <span class="keyword">template</span>&lt;aui::invocable Callback&gt;</div>
<div class="foldopen" data-end="}" data-start="{" id="foldopen00887">
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno"><a class="line" href="classAFuture.html#a1bb7bcf422be35b4219c0fe35e7af2c2">  887</a></span>    <span class="keyword">const</span> AFuture&amp; <a class="code hl_function" href="classAFuture.html#a1bb7bcf422be35b4219c0fe35e7af2c2">onFinally</a>(Callback&amp;&amp; callback)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        super::onFinally(std::forward&lt;Callback&gt;(callback));</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    }</div>
</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>};</div>
</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span> </div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span><span class="preprocessor">#include &lt;AUI/Thread/AThreadPool.h&gt;</span></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span><span class="preprocessor">#include &lt;AUI/Common/AException.h&gt;</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Value&gt;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span><span class="keywordtype">void</span> aui::impl::future::Future&lt;Value&gt;::Inner::wait(<span class="keyword">const</span> <a class="code hl_struct" href="struct__weak.html">_weak</a>&lt;CancellationWrapper&lt;Inner&gt;&gt;&amp; innerWeak,</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>                                                   <a class="code hl_class" href="classABitField.html">ABitField&lt;AFutureWait&gt;</a> flags) <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="keywordflow">if</span> (hasResult()) <span class="keywordflow">return</span>; <span class="comment">// cheap check</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    std::unique_lock lock(mutex);</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        <span class="keywordflow">if</span> ((thread || !cancelled) &amp;&amp; !hasResult() &amp;&amp; flags &amp; AFutureWait::ALLOW_TASK_EXECUTION_IF_NOT_PICKED_UP &amp;&amp; task) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>            <span class="comment">// task is not have picked up by the threadpool; execute it here</span></div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>            lock.unlock();</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <span class="keywordflow">if</span> (tryExecute(innerWeak)) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>            }</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            lock.lock();</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span> </div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="keywordflow">if</span> (flags &amp; AFutureWait::ALLOW_STACKFUL_COROUTINES) {</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> threadPoolWorker = _cast&lt;AThreadPool::Worker&gt;(<a class="code hl_function" href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a>())) {</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                <span class="keywordflow">if</span> (hasResult()) <span class="keywordflow">return</span>; <span class="comment">// for sure</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>                <a class="code hl_define" href="group__useful__macros.html#gaaea31a73fb11ef46f539d8292b33167f">AUI_ASSERT</a>(lock.owns_lock());</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>                <span class="keyword">auto</span> callback = [threadPoolWorker](<span class="keyword">auto</span>&amp;&amp;...) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                    threadPoolWorker-&gt;threadPool().wakeUpAll();</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                };</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                addOnSuccessCallback(callback);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>                addOnErrorCallback(callback);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                threadPoolWorker-&gt;loop([&amp;] {</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                  <span class="keywordflow">if</span> (lock.owns_lock())</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>                    lock.unlock();</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>                  <span class="keywordflow">return</span> !hasResult();</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                });</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        }</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <span class="keywordflow">while</span> ((thread || !cancelled) &amp;&amp; !hasResult()) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>            <span class="keywordflow">if</span> (thread == <a class="code hl_function" href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a>()) [[unlikely]] {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                <span class="comment">// self wait?</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>            }</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>            cv.wait(lock);</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        }</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classAThread_1_1Interrupted.html">AThread::Interrupted</a>&amp; e) {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        e.<a class="code hl_function" href="classAThread_1_1Interrupted.html#a01d46aa465b849cc5753f09ec31b15cf">needRethrow</a>();</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>    }</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>}</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span><span class="preprocessor">#if AUI_COROUTINES</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Value&gt;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span><span class="keyword">struct </span><a class="code hl_class" href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future</a>&lt;Value&gt;::CoPromiseType {</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    AFuture&lt;Value&gt; future;</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="keyword">auto</span> initial_suspend() const noexcept</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        <span class="keywordflow">return</span> std::suspend_never{};</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    <span class="keyword">auto</span> final_suspend() const noexcept</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        <span class="keywordflow">return</span> std::suspend_never{};</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    }</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <span class="keyword">auto</span> unhandled_exception() const noexcept {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        future.supplyException();</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="keyword">const</span> AFuture&lt;Value&gt;&amp; get_return_object() const noexcept {</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>        <span class="keywordflow">return</span> future; </div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span> </div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="keywordtype">void</span> return_value(Value v) <span class="keyword">const</span> <span class="keyword">noexcept</span> {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>        future.supplyValue(std::move(v));</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>    }</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>};</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span><span class="keyword">auto</span> <span class="keyword">operator</span> <span class="keyword">co_await</span>(<a class="code hl_class" href="classAFuture.html">AFuture&lt;T&gt;</a> future) {</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keyword">struct </span>Awaitable {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        AFuture&lt;T&gt; future;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span> </div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        <span class="keywordtype">bool</span> await_ready() const noexcept {</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            <span class="keywordflow">return</span> future.<a class="code hl_function" href="classaui_1_1impl_1_1future_1_1Future.html#aa5daf770778f70b6ce98d301d0e8619f">hasResult</a>();</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        }</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span> </div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        T await_resume() {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>            <span class="keywordflow">return</span> *future;</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        }</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span> </div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        <span class="keywordtype">void</span> await_suspend(std::coroutine_handle&lt;&gt; h)</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            future.<a class="code hl_function" href="classAFuture.html#a0c46bbaafece47c858e18e1ae3a9b27b">onSuccess</a>([h](<span class="keyword">const</span> <span class="keywordtype">int</span>&amp;) {</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                h.resume();</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            });</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>            </div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            future.<a class="code hl_function" href="classAFuture.html#a2c29ecb80f38bac577e9ddcc8535918e">onError</a>([h](<span class="keyword">const</span> AException&amp;) {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                h.resume();</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>            });</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>        }</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    };</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span> </div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <span class="keywordflow">return</span> Awaitable{ std::move(future) };</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>}</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aclassABitField_html"><div class="ttname"><a href="classABitField.html">ABitField</a></div><div class="ttdoc">Bit field implementation.</div><div class="ttdef"><b>Definition</b> ABitField.h:20</div></div>
<div class="ttc" id="aclassAConditionVariable_html"><div class="ttname"><a href="classAConditionVariable.html">AConditionVariable</a></div><div class="ttdoc">Represents a condition variable.</div><div class="ttdef"><b>Definition</b> AConditionVariable.h:24</div></div>
<div class="ttc" id="aclassAConditionVariable_html_ac0de7beaf1c9b3b0806d8bdec30af303"><div class="ttname"><a href="classAConditionVariable.html#ac0de7beaf1c9b3b0806d8bdec30af303">AConditionVariable::notify_all</a></div><div class="ttdeci">void notify_all() noexcept</div><div class="ttdef"><b>Definition</b> AConditionVariable.h:62</div></div>
<div class="ttc" id="aclassAException_html"><div class="ttname"><a href="classAException.html">AException</a></div><div class="ttdoc">Abstract AUI exception.</div><div class="ttdef"><b>Definition</b> AException.h:28</div></div>
<div class="ttc" id="aclassAFuture_html"><div class="ttname"><a href="classAFuture.html">AFuture</a></div><div class="ttdoc">Represents a value that will be available at some point in the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:621</div></div>
<div class="ttc" id="aclassAFuture_html_a0419821dfc46db2a6c7981927994e2a2"><div class="ttname"><a href="classAFuture.html#a0419821dfc46db2a6c7981927994e2a2">AFuture&lt; void &gt;::onError</a></div><div class="ttdeci">const AFuture &amp; onError(Callback &amp;&amp;callback) const</div><div class="ttdoc">Add onSuccess callback to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:878</div></div>
<div class="ttc" id="aclassAFuture_html_a0c46bbaafece47c858e18e1ae3a9b27b"><div class="ttname"><a href="classAFuture.html#a0c46bbaafece47c858e18e1ae3a9b27b">AFuture::onSuccess</a></div><div class="ttdeci">const AFuture &amp; onSuccess(Callback &amp;&amp;callback) const noexcept</div><div class="ttdoc">Add onSuccess callback to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:709</div></div>
<div class="ttc" id="aclassAFuture_html_a1bb7bcf422be35b4219c0fe35e7af2c2"><div class="ttname"><a href="classAFuture.html#a1bb7bcf422be35b4219c0fe35e7af2c2">AFuture&lt; void &gt;::onFinally</a></div><div class="ttdeci">const AFuture &amp; onFinally(Callback &amp;&amp;callback) const</div><div class="ttdoc">Adds the callback to both onSuccess and onResult.</div><div class="ttdef"><b>Definition</b> AFuture.h:887</div></div>
<div class="ttc" id="aclassAFuture_html_a2c29ecb80f38bac577e9ddcc8535918e"><div class="ttname"><a href="classAFuture.html#a2c29ecb80f38bac577e9ddcc8535918e">AFuture::onError</a></div><div class="ttdeci">const AFuture &amp; onError(Callback &amp;&amp;callback) const noexcept</div><div class="ttdoc">Add onError callback to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:734</div></div>
<div class="ttc" id="aclassAFuture_html_a2f550fb2f9abba74e364cb54b2f9a914"><div class="ttname"><a href="classAFuture.html#a2f550fb2f9abba74e364cb54b2f9a914">AFuture&lt; void &gt;::supplyException</a></div><div class="ttdeci">void supplyException(std::exception_ptr causedBy=std::current_exception()) const noexcept</div><div class="ttdoc">Stores an exception from std::current_exception to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:793</div></div>
<div class="ttc" id="aclassAFuture_html_a657b6d64c82ffd61689d5fc6f8d61ebe"><div class="ttname"><a href="classAFuture.html#a657b6d64c82ffd61689d5fc6f8d61ebe">AFuture::map</a></div><div class="ttdeci">auto map(Callback &amp;&amp;callback) -&gt; AFuture&lt; decltype(callback(std::declval&lt; T &gt;()))&gt; const</div><div class="ttdoc">Maps this AFuture to another type of AFuture.</div><div class="ttdef"><b>Definition</b> AFuture.h:752</div></div>
<div class="ttc" id="aclassAFuture_html_aa640a25cdc678b93f8d764a83013841f"><div class="ttname"><a href="classAFuture.html#aa640a25cdc678b93f8d764a83013841f">AFuture::supplyValue</a></div><div class="ttdeci">void supplyValue(T v) const noexcept</div><div class="ttdoc">Pushes the result to AFuture.</div><div class="ttdef"><b>Definition</b> AFuture.h:651</div></div>
<div class="ttc" id="aclassAFuture_html_aca801362eb2b2fe811b8ef673fa081d6"><div class="ttname"><a href="classAFuture.html#aca801362eb2b2fe811b8ef673fa081d6">AFuture&lt; void &gt;::onSuccess</a></div><div class="ttdeci">const AFuture &amp; onSuccess(Callback &amp;&amp;callback) const</div><div class="ttdoc">Add onSuccess callback to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:853</div></div>
<div class="ttc" id="aclassAFuture_html_ad63fde0831188f9a75a7b0e10bd2a50d"><div class="ttname"><a href="classAFuture.html#ad63fde0831188f9a75a7b0e10bd2a50d">AFuture::supplyException</a></div><div class="ttdeci">void supplyException(std::exception_ptr causedBy=std::current_exception()) const noexcept</div><div class="ttdoc">Stores an exception from std::current_exception to the future.</div><div class="ttdef"><b>Definition</b> AFuture.h:664</div></div>
<div class="ttc" id="aclassAFuture_html_ae25e87699d0b39d45b6b2cd3555dc7b5"><div class="ttname"><a href="classAFuture.html#ae25e87699d0b39d45b6b2cd3555dc7b5">AFuture::onFinally</a></div><div class="ttdeci">const AFuture &amp; onFinally(Callback &amp;&amp;callback) const noexcept</div><div class="ttdoc">Adds the callback to both onSuccess and onResult.</div><div class="ttdef"><b>Definition</b> AFuture.h:743</div></div>
<div class="ttc" id="aclassAFuture_html_aee857ead4b1496f905155e0b09fb091c"><div class="ttname"><a href="classAFuture.html#aee857ead4b1496f905155e0b09fb091c">AFuture&lt; void &gt;::supplyValue</a></div><div class="ttdeci">void supplyValue() const noexcept</div><div class="ttdoc">Pushes "success" result.</div><div class="ttdef"><b>Definition</b> AFuture.h:803</div></div>
<div class="ttc" id="aclassAInvocationTargetException_html"><div class="ttname"><a href="classAInvocationTargetException.html">AInvocationTargetException</a></div><div class="ttdef"><b>Definition</b> AFuture.h:37</div></div>
<div class="ttc" id="aclassAOptional_html"><div class="ttname"><a href="classAOptional.html">AOptional</a></div><div class="ttdoc">Utility wrapper implementing the stack-allocated (fast) optional idiom.</div><div class="ttdef"><b>Definition</b> AOptional.h:33</div></div>
<div class="ttc" id="aclassASpinlockMutex_html"><div class="ttname"><a href="classASpinlockMutex.html">ASpinlockMutex</a></div><div class="ttdoc">Synchronization primitive that is implemented with atomic values instead of doing syscalls.</div><div class="ttdef"><b>Definition</b> AMutex.h:65</div></div>
<div class="ttc" id="aclassAStacktrace_html_a40c074f612095508f89377c7cf5140d3"><div class="ttname"><a href="classAStacktrace.html#a40c074f612095508f89377c7cf5140d3">AStacktrace::capture</a></div><div class="ttdeci">static AStacktrace capture(unsigned skipFrames=0, unsigned maxFrames=128) noexcept</div><div class="ttdoc">Creates stacktrace of the current thread.</div></div>
<div class="ttc" id="aclassAString_html"><div class="ttname"><a href="classAString.html">AString</a></div><div class="ttdoc">Represents a Unicode character string.</div><div class="ttdef"><b>Definition</b> AString.h:38</div></div>
<div class="ttc" id="aclassAThreadPool_html"><div class="ttname"><a href="classAThreadPool.html">AThreadPool</a></div><div class="ttdoc">Thread pool implementation.</div><div class="ttdef"><b>Definition</b> AThreadPool.h:33</div></div>
<div class="ttc" id="aclassAThread_1_1Interrupted_html"><div class="ttname"><a href="classAThread_1_1Interrupted.html">AThread::Interrupted</a></div><div class="ttdoc">Exception that is thrown by AThread::interruptionPoint(), if interruption is requested for this threa...</div><div class="ttdef"><b>Definition</b> AThread.h:175</div></div>
<div class="ttc" id="aclassAThread_1_1Interrupted_html_a01d46aa465b849cc5753f09ec31b15cf"><div class="ttname"><a href="classAThread_1_1Interrupted.html#a01d46aa465b849cc5753f09ec31b15cf">AThread::Interrupted::needRethrow</a></div><div class="ttdeci">void needRethrow() const noexcept</div><div class="ttdoc">Schedules AThread::Interrupted exception to the next interruption point. Sometimes you could not thro...</div><div class="ttdef"><b>Definition</b> AThread.h:182</div></div>
<div class="ttc" id="aclassAThread_html_a1664a87c918f74c753e435501d0d1885"><div class="ttname"><a href="classAThread.html#a1664a87c918f74c753e435501d0d1885">AThread::interruptionPoint</a></div><div class="ttdeci">static void interruptionPoint()</div><div class="ttdoc">Interruption point.</div></div>
<div class="ttc" id="aclassAThread_html_a455beceab4e80bba85d44a5d4ee15b08"><div class="ttname"><a href="classAThread.html#a455beceab4e80bba85d44a5d4ee15b08">AThread::current</a></div><div class="ttdeci">static _&lt; AAbstractThread &gt; current()</div></div>
<div class="ttc" id="aclass___html"><div class="ttname"><a href="class__.html">_</a></div><div class="ttdoc">An std::weak_ptr with AUI extensions.</div><div class="ttdef"><b>Definition</b> SharedPtrTypes.h:179</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html">aui::impl::future::Future</a></div><div class="ttdef"><b>Definition</b> AFuture.h:114</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a0578501a241e49a209694084f6eb1194"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a0578501a241e49a209694084f6eb1194">aui::impl::future::Future::isWaitNeeded</a></div><div class="ttdeci">bool isWaitNeeded() const noexcept</div><div class="ttdef"><b>Definition</b> AFuture.h:387</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a11ec964f2ce8f8726b37f0aa5f7ecbb0"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a11ec964f2ce8f8726b37f0aa5f7ecbb0">aui::impl::future::Future::hasValue</a></div><div class="ttdeci">bool hasValue() const noexcept</div><div class="ttdef"><b>Definition</b> AFuture.h:404</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a4774b655e122ffe6ee93f60d0f5632aa"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a4774b655e122ffe6ee93f60d0f5632aa">aui::impl::future::Future::operator*</a></div><div class="ttdeci">FutureReturnType&lt; Value &gt;::type operator*()</div><div class="ttdoc">Returns the supplyValue from the another thread. Sleeps if the supplyValue is not currently available...</div><div class="ttdef"><b>Definition</b> AFuture.h:517</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a4e51c2970177c73026597a889d09c363"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a4e51c2970177c73026597a889d09c363">aui::impl::future::Future::onFinally</a></div><div class="ttdeci">void onFinally(Callback &amp;&amp;callback) const</div><div class="ttdoc">Adds the callback to both onSuccess and onResult.</div><div class="ttdef"><b>Definition</b> AFuture.h:436</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a57e9a0f2c65b1e36c3ccd5ff59a40910"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a57e9a0f2c65b1e36c3ccd5ff59a40910">aui::impl::future::Future::operator-&gt;</a></div><div class="ttdeci">Value * operator-&gt;() const</div><div class="ttdoc">Returns the supplyValue from the another thread. Sleeps if the supplyValue is not currently available...</div><div class="ttdef"><b>Definition</b> AFuture.h:529</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a86f6a2302691921a1848b44813710a41"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a86f6a2302691921a1848b44813710a41">aui::impl::future::Future::cancel</a></div><div class="ttdeci">void cancel() const noexcept</div><div class="ttdoc">Cancels the AFuture's task.</div><div class="ttdef"><b>Definition</b> AFuture.h:452</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_a93534534889dea9725ee1f5acbbec3c8"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#a93534534889dea9725ee1f5acbbec3c8">aui::impl::future::Future::wait</a></div><div class="ttdeci">void wait(AFutureWait flags=AFutureWait::DEFAULT) const</div><div class="ttdoc">Sleeps if the supplyValue is not currently available.</div><div class="ttdef"><b>Definition</b> AFuture.h:465</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_aa5daf770778f70b6ce98d301d0e8619f"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#aa5daf770778f70b6ce98d301d0e8619f">aui::impl::future::Future::hasResult</a></div><div class="ttdeci">bool hasResult() const noexcept</div><div class="ttdef"><b>Definition</b> AFuture.h:395</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_abfe5754a3209491e78c64461244b63fa"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#abfe5754a3209491e78c64461244b63fa">aui::impl::future::Future::Future</a></div><div class="ttdeci">Future(TaskCallback task=nullptr)</div><div class="ttdef"><b>Definition</b> AFuture.h:376</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_ac99fbb4b588e6504a9da1a9186e137ae"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#ac99fbb4b588e6504a9da1a9186e137ae">aui::impl::future::Future::get</a></div><div class="ttdeci">FutureReturnType&lt; Value &gt;::type get(AFutureWait flags=AFutureWait::DEFAULT) const</div><div class="ttdoc">Returns the supplyValue from the another thread. Sleeps if the supplyValue is not currently available...</div><div class="ttdef"><b>Definition</b> AFuture.h:478</div></div>
<div class="ttc" id="aclassaui_1_1impl_1_1future_1_1Future_html_aecb26a46cb0171ac3d3210ffe6eca1f5"><div class="ttname"><a href="classaui_1_1impl_1_1future_1_1Future.html#aecb26a46cb0171ac3d3210ffe6eca1f5">aui::impl::future::Future::operator*</a></div><div class="ttdeci">FutureReturnType&lt; Value &gt;::type operator*() const</div><div class="ttdoc">Returns the task result from the another thread. Sleeps if the task result is not currently available...</div><div class="ttdef"><b>Definition</b> AFuture.h:505</div></div>
<div class="ttc" id="agroup__core_html_gad9bfc0a6304376bef420ce99fbe17e85"><div class="ttname"><a href="group__core.html#gad9bfc0a6304376bef420ce99fbe17e85">AUI_ENUM_FLAG</a></div><div class="ttdeci">#define AUI_ENUM_FLAG(name)</div><div class="ttdoc">Make a bitfield-style enum class.</div><div class="ttdef"><b>Definition</b> AEnumerate.h:227</div></div>
<div class="ttc" id="agroup__useful__macros_html_gaaea31a73fb11ef46f539d8292b33167f"><div class="ttname"><a href="group__useful__macros.html#gaaea31a73fb11ef46f539d8292b33167f">AUI_ASSERT</a></div><div class="ttdeci">#define AUI_ASSERT(condition)</div><div class="ttdoc">Asserts that the passed condition evaluates to true.</div><div class="ttdef"><b>Definition</b> Assert.h:55</div></div>
<div class="ttc" id="agroup__useful__macros_html_gae43a68976a4d8539e92ff86fc034218c"><div class="ttname"><a href="group__useful__macros.html#gae43a68976a4d8539e92ff86fc034218c">AUI_ASSERTX</a></div><div class="ttdeci">#define AUI_ASSERTX(condition, what)</div><div class="ttdoc">Asserts that the passed condition evaluates to true. Adds extra message string.</div><div class="ttdef"><b>Definition</b> Assert.h:74</div></div>
<div class="ttc" id="agroup__views_html_ggaec8a763bfbb2044d7b55de90c5a56742a5b39c8b553c821e7cddc6da64b5bd2ee"><div class="ttname"><a href="group__views.html#ggaec8a763bfbb2044d7b55de90c5a56742a5b39c8b553c821e7cddc6da64b5bd2ee">ATextInputActionIcon::DEFAULT</a></div><div class="ttdeci">@ DEFAULT</div><div class="ttdoc">There's no concrete input action. Let the OS decide which action is the most appropriate.</div><div class="ttdef"><b>Definition</b> ATextInputActionIcon.h:36</div></div>
<div class="ttc" id="astruct__weak_html"><div class="ttname"><a href="struct__weak.html">_weak</a></div><div class="ttdoc">An std::weak_ptr with AUI extensions.</div><div class="ttdef"><b>Definition</b> SharedPtrTypes.h:52</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1CancellationWrapper_html"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1CancellationWrapper.html">aui::impl::future::CancellationWrapper</a></div><div class="ttdef"><b>Definition</b> AFuture.h:70</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1FutureReturnType_html"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1FutureReturnType.html">aui::impl::future::FutureReturnType</a></div><div class="ttdef"><b>Definition</b> AFuture.h:98</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1Future_1_1Inner_html"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html">aui::impl::future::Future::Inner</a></div><div class="ttdef"><b>Definition</b> AFuture.h:121</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1Future_1_1Inner_html_a431e9f0127b66804bf0e314477c4bd4a"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#a431e9f0127b66804bf0e314477c4bd4a">aui::impl::future::Future::Inner::value</a></div><div class="ttdeci">std::conditional_t&lt; isVoid, bool, AOptional&lt; Value &gt; &gt; value</div><div class="ttdef"><b>Definition</b> AFuture.h:126</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1Future_1_1Inner_html_aa7c5aefcf52dd35751c46ceec94e8405"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#aa7c5aefcf52dd35751c46ceec94e8405">aui::impl::future::Future::Inner::notifyOnSuccessCallback</a></div><div class="ttdeci">void notifyOnSuccessCallback(std::unique_lock&lt; decltype(mutex)&gt; &amp;lock) noexcept</div><div class="ttdoc">Calls onSuccess callback.</div><div class="ttdef"><b>Definition</b> AFuture.h:293</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1Future_1_1Inner_html_adbe5e1bfd42e4aeed5cb2afee35eff48"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#adbe5e1bfd42e4aeed5cb2afee35eff48">aui::impl::future::Future::Inner::tryExecute</a></div><div class="ttdeci">bool tryExecute(const _weak&lt; CancellationWrapper&lt; Inner &gt; &gt; &amp;innerWeak)</div><div class="ttdoc">Executes the task stored in the future. Using weak_ptr to internal object in order to make possible F...</div><div class="ttdef"><b>Definition</b> AFuture.h:202</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1Future_1_1Inner_html_ae1ae079b97dd192c66adde48cf082e40"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1Future_1_1Inner.html#ae1ae079b97dd192c66adde48cf082e40">aui::impl::future::Future::Inner::mutex</a></div><div class="ttdeci">ASpinlockMutex mutex</div><div class="ttdef"><b>Definition</b> AFuture.h:132</div></div>
<div class="ttc" id="astructaui_1_1impl_1_1future_1_1OnSuccessCallback_html"><div class="ttname"><a href="structaui_1_1impl_1_1future_1_1OnSuccessCallback.html">aui::impl::future::OnSuccessCallback</a></div><div class="ttdef"><b>Definition</b> AFuture.h:93</div></div>
</div><!-- fragment --><p class="footer-inner">
    © 2025 AUI Framework Contributors. Documentation contributions included herein are the copyrights of their
    respective owners. The documentation provided herein is licensed under the terms of the GNU Free Documentation
    License version 1.3 as published by the Free Software Foundation. All trademarks are property of their respective owners.
</p>
</div><div class="contents-rails-right"></div></div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
</div></body>
</html>
