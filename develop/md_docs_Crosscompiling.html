<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="dark-mode">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AUI Framework: Crosscompiling (Android and iOS)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doxygen.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AUI Framework
   &#160;<span id="projectnumber">develop</span>
   </div>
   <div id="projectbrief">Cross-platform module-based framework for developing  C++20 desktop applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_Crosscompiling.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Crosscompiling (Android and iOS) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md113"></a>
The AUI_BUILD_FOR way</h1>
<p >AUI provides the unified way to cross-compile your application with AUI_BUILD_FOR CMake configure variable. When specified, CMake does the whole configure routine as if the project is compiled for the host system but it generates extra project directory for the target platform's development environment once the <code>apps</code> target is invoked.</p>
<p >To build target platform's final application package, run build the <code>apps</code> target.</p>
<h1><a class="anchor" id="autotoc_md116"></a>
The CMAKE_TOOLCHAIN_FILE way</h1>
<p >That's the common way of crosscompiling with CMake. You need a toolchain file which describes your target platform.</p>
<p >In Android, a Gradle-driven project provides the toolchain for you. You don't even need to specify CMAKE_TOOLCHAIN_FILE, Gradle does it for you.</p>
<p >In iOS, there's no "official" toolchain so there are community-provided toolchains (like the <a href="https://raw.githubusercontent.com/aui-framework/aui/master/cmake/toolchains/arm64-ios.cmake">one used in AUI</a>).</p>
<p >AUI.Boot forwards <code>CMAKE_TOOLCHAIN_FILE</code> across all the dependencies.</p>
<h2><a class="anchor" id="autotoc_md117"></a>
Example</h2>
<p >Assuming working directory is the build directory:</p>
<p >To configure the project use </p><div class="fragment"><div class="line">cmake -DAUI_BUILD_FOR=android ..</div>
</div><!-- fragment --><p >To build the project use </p><div class="fragment"><div class="line">cmake --build . -t apps</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md118"></a>
Supported platforms</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><code>AUI_BUILD_FOR</code> value   </th><th class="markdownTableHeadNone">Host platform   </th><th class="markdownTableHeadNone">Target platform   </th><th class="markdownTableHeadNone">Project environment   </th><th class="markdownTableHeadNone">Project dir    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>android</code>   </td><td class="markdownTableBodyNone">Windows Linux macOS   </td><td class="markdownTableBodyNone">Android   </td><td class="markdownTableBodyNone">Gradle (can be opened with Android Studio)   </td><td class="markdownTableBodyNone"><code>${CMAKE_BINARY_DIR}/app_project</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ios</code>   </td><td class="markdownTableBodyNone">macOS   </td><td class="markdownTableBodyNone">iOS   </td><td class="markdownTableBodyNone">Xcode   </td><td class="markdownTableBodyNone"><code>${CMAKE_BINARY_DIR}/app_project</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md120"></a>
Limitations</h2>
<ol type="1">
<li>Variables defined in the configure step (including the ones specified with command line by <code>-DVAR=VALUE</code> syntax) are not forwarded to the child CMake configure process. To bypass the limitation, use <code>auib_mark_var_forwardable(VAR)</code> function, where <code>VAR</code> is your variable name.</li>
<li>As like CMake's generated projects, the projects generated by AUI are not portable too.</li>
</ol>
<h1><a class="anchor" id="autotoc_md121"></a>
Replacing AUI mobile project</h1>
<p >Some projects may require their custom mobile project (Android Studio or Xcode), for example to specific mobile features (such as Google Play Games integration, Face ID, etc). In this case, you would have to create your own project and link AUI as a library.</p>
<h2><a class="anchor" id="autotoc_md122"></a>
Android</h2>
<ol type="1">
<li>Create new Android Studio project with native C++ support.</li>
<li>In your <code>app/src/cpp/CMakeLists.txt</code>, <code>add_subdirectory</code> your C++ application or directly <code>auib_import</code> the AUI framework (unrecommended because you will experience difficulties when compiling for other platforms).</li>
<li>Copy &amp; paste AUI's <a href="https://github.com/aui-framework/aui/tree/master/platform/android">native Java code</a> for Android to your project. You may also want to adjust your <code>app.gradle</code> and <code>AndroidManifest.xml</code>.</li>
<li>To draw AUI, you should use <code>GLSurfaceView</code> and <a href="https://github.com/aui-framework/aui/blob/master/platform/android/lib/src/java/com/github/aui/android/AuiView.kt">pass rendering routines</a> to AUI. Also, take care of handling user input. Also, you can inflate <a href="https://github.com/aui-framework/aui/blob/master/platform/android/lib/src/java/com/github/aui/android/AuiView.kt">AuiView</a> to your own Android layout.</li>
</ol>
<h2><a class="anchor" id="autotoc_md123"></a>
iOS</h2>
<ol type="1">
<li>Create new Xcode project.</li>
<li>Since Xcode does not support CMake, you will have to compile AUI (and your C++ AUI application) by yourself (by creating Xcode rules or manually dropping compiled binaries to Xcode project).</li>
<li><a href="https://github.com/aui-framework/aui/blob/master/aui.views/src/AUI/Platform/ios/AUIViewController.mm">Take a look</a> on how does AUI handles its routines on iOS and implement them by yourself in your project. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
</body>
</html>
